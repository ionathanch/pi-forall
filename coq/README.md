# StraTT syntactic metatheory

Tested with:

    The Coq Proof Assistant, version 8.18.0
    compiled with OCaml 5.1.1

    coq-metalib pinned to version dev at
      git+https://github.com/plclub/metalib.git

To install using OPAM:

    opam repo add coq-released https://coq.inria.fr/opam/released
    opam pin coq 8.18.0
    opam pin add coq-metalib https://github.com/plclub/metalib.git

To compile:

    make -f CoqSrc.mk

Note: some files have been generated with:

    Ott, fork of version 0.31 at
      git+https://github.com:sweirich/ott.git

    LNgen, version 0.3.2
      git+https://github.com/plclub/lngen.git

(These tools are not needed to compile the .v files in this repository.)

## Axioms

Because we use the `dependent induction` tactic from Coq.Program.Equality,
this development inherits the `eq_rect_eq` axiom (i.e. UIP) from Coq.Logic.Eqdep.
All additional axioms are listed in the file axioms.v.


## Mechanization summary

```
github.com/AlDanial/cloc v 2.00  T=0.03 s (338.4 files/s, 126676.0 lines/s)
-------------------------------------------------------------------------------
File                             blank        comment           code
-------------------------------------------------------------------------------
StraTT_inf.v                       362            156           1065
StraTT_ott.v                        49             26            477
ctx.v                               53             17            323
typesafety.v                        21              9            322
restrict.v                          15              6            227
inversion.v                         18             20            219
basics.v                            38             10            205
subst.v                             11             15            204
incr.v                              14             14            121
tactics.v                            6              5             36
axioms.v                            14              9             31
-------------------------------------------------------------------------------
SUM:                               601            287           3230
-------------------------------------------------------------------------------
```


## Contents

```
StraTT_ott.v:
  Coq specification of the rules

StraTT_inf.v:
  lemmas about locally nameless representation
  generated by LNgen, then slightly modified by hand

axioms.v:
  inversion lemmas about equality needed for preservation
    and progress proofs

tactics.v:
  tactics for working with metalib

basics.v:
  basic results about type system
  (local closure and free variables of terms declared in context)

incr.v:
  how displacement function interacts with other functions
  (itself, size, open, subst)
  judgements stable under displacement (DTyping_DCtx_incr)
  Note: displacement is called "incr"

ctx.v:
  definition of context restriction
  judgements stable under context restriction
     DSig_DCtx_DTyping_restriction
  weakenening
  context regularity
  narrowing (SubG, DTyping_SubG)

restrict.v:
  definition of floating operation
  jugdements stable under floating
      (DCtx_DTyping_float_restrict)
  typing cumulativity

subst.v:
  judgements stable under substitution (DCtx_DTyping_subst)

inversion.v:
  inversion lemmas for typing relation
  regularity (DTyping_regularity)

typesafety.v:
  judgements stable under context conversion (DCtx_DTyping_conversion)
  preservation
  canonical forms
  progress
```
